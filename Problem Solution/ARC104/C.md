```
题目难度：2009
个人难度：CSP-S T2
时间：2025.9.21
标签：DP，模拟
```

# C. Fair Elevator

## 题目描述

有一栋由 $2N$ 层组成的大楼，每层从下到上依次编号为 $1, 2, \ldots, 2N$。

这栋大楼的电梯只运行了一次，从 $1$ 楼到 $2N$ 楼。

在这次运行过程中，有 $N$ 个人进行了上下电梯的操作。第 $i$ 个人（$1 \leq i \leq N$）在 $A_i$ 楼上电梯，在 $B_i$ 楼下电梯。满足 $1 \leq A_i < B_i \leq 2N$，且每一层只有一人上下电梯。

此外，这 $N$ 个人都很挑剔，因此满足以下条件：

- 对于第 $i$ 个人（$1 \leq i \leq N$），当他在电梯内时，其他人上下电梯的次数记为 $C_i (= B_i - A_i - 1)$，则有：
  - 如果存在某一时刻第 $i$ 个人和第 $j$ 个人同时在电梯内，则 $C_i = C_j$。

$A, B$ 的记录被保存了下来，但遗憾的是，部分记录丢失了。若 $A_i, B_i$ 丢失，则以 $-1$ 给出。

另外，剩下的记录也有可能是错误的。

请判断是否存在一种 $A, B$ 的组合，使得与现有记录不矛盾。

## 输入格式

输入通过标准输入给出，格式如下：

> $N$ $A_1$ $B_1$ $A_2$ $B_2$ $\ldots$ $A_N$ $B_N$

## 输出格式

如果存在与现有记录不矛盾的 $A, B$ 的组合，输出 `Yes`，否则输出 `No`。

## 输入输出样例 #1

### 输入 #1

```
3
1 -1
-1 4
-1 6
```

### 输出 #1

```
Yes
```

## 输入输出样例 #2

### 输入 #2

```
2
1 4
2 3
```

### 输出 #2

```
No
```

## 输入输出样例 #3

### 输入 #3

```
2
4 1
2 4
```

### 输出 #3

```
No
```

## 说明/提示

### 限制条件

- $1 \leq N \leq 100$
- $A_i = -1$ 或 $1 \leq A_i \leq 2N$
- $B_i = -1$ 或 $1 \leq B_i \leq 2N$
- 所有输入均为整数

### 样例解释 1

例如，若 $B_1 = 3, A_2 = 2, A_3 = 5$，则可以满足所有条件。在这种情况下，第 $1$ 个人和第 $2$ 个人有一段时间同时在电梯内，但 $C_1 = C_2 = 1$，因此没有问题。

### 样例解释 2

第 $1$ 个人和第 $2$ 个人有一段时间同时在电梯内，但 $C_1 = 2, C_2 = 0$，因此至少有一条信息是错误的。

### 样例解释 3

看似所有记录都保留了，但显然存在矛盾。

由 ChatGPT 4.1 翻译

## 题解

考虑刻画 $C_i = C_j$ 的性质。容易发现，区间形式一定形如 $[l, r], [l + 1, r + 1], \cdots$。

因此，整个序列会被划分成若干个不相交的“块”，不难想到 DP。

设 $f_i$ 表示前 $i$ 个数是否可以划分成功。那么，考虑 push，我们枚举 $[i + 1, r]$，看 $[i + 1, 2r - i - 2]$ 是否满足条件，判断是比较好判断的，但是细节特别多。

## 总结

比较水的一道 2000，但是细节特别多。如果调不出来，一定要好好分析 Corner Case。（针对代码 Hack）
