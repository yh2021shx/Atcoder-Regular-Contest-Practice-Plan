# C

```
Quality = 高
Difficulty = 2200
Personal_Difficulty = NOIP_T2
Time = 2025.9.24
Tag = 构造 思维
```

## 题解

考虑对于一个前缀异或和 $x$，再加哪个 $b_i$，可以使得 $x \oplus b_i \geq x$。容易发现，这当且仅当 $b_i$ 的最高位在 $x$ 中为 $0$。因此，每个 $b_i$ 能否插入只和 $b_i$ 的最高位有关。

**由于高位会影响低位，所以考虑低位先插入，高位再插入。**

假设我们当前正在考虑最高位为第 $x$ 位的数，那么我们肯定要一起插入进去。我们把整个序列的第 $k$ 位取出来，考虑如何贪心插入使得能全部插入进去，容易发现一定是开头插一个，中间每个 $1$ 后面都插一个。（因此，插入与数的相对顺序无关，也就是说可以证明这是最优策略）

因此，维护一个数组表示当前 $a$ 数组存的数，插入时新建一个临时数组即可。

## 反思

为什么 CF 题 AT 味这么浓？？？

* 首先，第一步显然的条件要观察到。
* **要意识到 $b_i$ 能否插入只和最高位有关，所以给位排序后插入。**

# D

```
Quality = 高
Difficulty = 2600
Personal_Difficulty = NOIP_T2.5
Time = 2025.9.24
Tag = 构造 分析 思维
```

## 题解

首先，如果路径不走重复点，那么肯定经过的所有边都是初始的开放边，那么直接找到 $1$ 到 $n$ 的最短路即可。

接下来，我们来分析为什么要走重复点。先把 $1$ 直接与 $n$ 有开放边的情况判掉，那么这时候，我们 $1$ 走一条边，$1 \to n$ 就会开放(那些 $1$ 没有的边也会开放)。因此，我们如果能走回 $1$，那么就可以直接到 $n$。

如何走回 $1$？我们发现，其实只要能走到一个 $1$ 到不了的点，就能走回 $1$ 了。因此，路径一定形如 $1 \to x \to y \to 1 \to n$，其中 $x \to y$ 且 $1$ 和 $y$ 最初没有开放边。这个长度为 $4$。

但是，如果 $1$ 能走到连通块内的所有点，那这就 G 了。其实不然，对于任意一个和 $n$ 没有直接连边的 $x$，只要能走回 $x$，都可以成功。因此，第三种路径形如 $1 \to x \to y \to z \to x \to n$，其中 $x \to y, y \to z$ 且 $x$ 与 $z$ 没有直接连边。

第一种路径好判断，第二种枚举 $x, y$ 即可，第三种就是三元环计数，时间复杂度 $\mathcal{O}(n\sqrt{n})$。

## 总结

* 本题的切入点在于思考为什么要走重复点。
* 三元环计数暴力就是 $\mathcal{O}(n\sqrt{n})$ 的。
* 分类讨论要细致，清晰。
* **一定要随时的深刻理解当前的对象结构。**
