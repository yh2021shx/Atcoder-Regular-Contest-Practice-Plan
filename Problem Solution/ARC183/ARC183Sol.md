# B

```
Quality = 好
Difficulty = 2118
Personal_Difficulty = NOIP_T2.5
Time = 2025.9.23
Tag = 思维 分析
```

## 题解

首先，如果 $B$ 中出现了 $A$ 中没有的数，答案肯定是 `NO`。如果 $A = B$，答案肯定是 `YES`。

**整题最重要观察：如果有一个自由点且 $k > 1$，那么我们可以随意交换任意相邻的两个数。**

> 证明：考虑每次把自由点往这两个数靠近，如果距离 $\leq k$，那么我们就可以以自由点为中转站来进行交换。 

推论显而易见：如果有一个自由点且 $k > 1$，那么我们可以任意重排整个序列（除了自由点），并且每个数都可以等于在 $A$ 中有的值。

先考虑 $k = 1$，那么只能相邻赋值，显然最后的答案形如一段一段的相等数，可以给 $B$ 压块后判断是否是子序列。

然后考虑 $k > 1$，如果有自由点，由于推论且元素集合是一样的，肯定有解。因此，问题转化为是否存在自由点。

我们考虑刻画自由点，这是一个下标 $p$，使得别的数都和 $B$ 相等的时候，存在一个数能给他赋值，使得 $a_p = b_p$。那么，这其实就是问是否存在 $b_i = b_p, |i - p| \leq k$，而这个很好判断。

## 实现

* 首先，我们需要记一个桶来判断特殊情况。
* 为了判断是否存在自由点，我们需要存个 `vector`。
* 小心 Corner Case。

## 反思

这是一道典型的 Atcoder 风格题目，十分考验对题目的直觉和分析。

* $|i - j| \leq k$ 其实会提示你跟区间有关。（在本题里是相邻）
* **直接做十分困难，我们要尝试简化操作。**
* 先把几种简单的情况判掉，否则容易忘考虑。
